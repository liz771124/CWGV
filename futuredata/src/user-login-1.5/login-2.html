<!doctype html>
<html lang="zh-Hant">
  <head>
    <!-- HTML meta 設定（必填） -->
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <!-- <meta name="google-site-verification" content="ePsrsO4QifMuCpIoyJpdPpAimc7Jf6aAbxtOVrbDrJc" /> -->
    <meta
      name="description"
      content="天下文化官方網站，以「傳播進步觀念，豐富閱讀世界」為願景，致力成為在台灣及華文世界中最具影響力的文化事業群。創立以來出版超過兩千種書，涵括財經企管、心理勵志、社會人文、科學、文學、健康親子、大樹文化等領域。加入天下文化書坊，即刻累積你的閱讀競爭力！"
    />
    <meta name="author" content="遠見‧天下文化事業群" />
    <meta name="copyright" content="遠見‧天下文化事業群" />
    <meta
      name="keywords"
      content="遠見‧天下文化事業群,天下文化,天下,bookzone,網路書店,購書,書店,書籍,暢銷書,買書,新書,出版社,暢銷排行榜,暢銷榜,讀書會,財經,管理,大師,科學文化,健康生活,親子,學生,觀念系列,大學,教科書,文學人生,簡報檔,PDF檔下載,專家導讀,讀者,書評,演講,活動,論壇"
    />
    <meta name="URL" content="https://member.cwgv.com.tw/" />

    <meta property="og:type" content="book" />

    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=0"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />

    <!-- 網站標題 & Favicon &  -->
    <title>遠見‧天下文化事業群會員中心</title>
    <link
      rel="shortcut icon"
      href="https://member.cwgv.com.tw/public/images/cwgv-favi.png"
    />

    <!-- jQuery -->
    <script
      type="text/javascript"
      src="https://member.cwgv.com.tw/public/library/jquery/jquery-1.9.0.min.js"
    ></script>

    <!-- jQuery UI -->
    <script
      type="text/javascript"
      src="https://member.cwgv.com.tw/public/library/jquery-ui/js/jquery-ui-1.10.0.custom.min.js"
    ></script>

    <!-- Bootstrap -->
    <link
      type="text/css"
      rel="stylesheet"
      href="https://member.cwgv.com.tw/public/library/bootstrap/css/bootstrap.min.css"
    />
    <script
      type="text/javascript"
      src="https://member.cwgv.com.tw/public/library/bootstrap/js/bootstrap.min.js"
    ></script>
    <link
      type="text/css"
      rel="stylesheet"
      href="https://member.cwgv.com.tw/public/library/datepicker/css/datepicker.css"
    />

    <!-- Validate -->
    <script
      type="text/javascript"
      src="https://member.cwgv.com.tw/public/library/jquery.validate.js"
    ></script>
    <script
      type="text/javascript"
      src="https://member.cwgv.com.tw/public/library/birthdaypicker/bday-picker.js"
    ></script>
    <script
      type="text/javascript"
      src="https://member.cwgv.com.tw/public/library/twzipcode/jquery.twzipcode-1.7.8.js"
    ></script>

    <!-- Font Awsome -->
    <link
      type="text/css"
      rel="stylesheet"
      href="https://member.cwgv.com.tw/public/library/font-awesome/css/font-awesome.css"
    />

    <!-- colorbox -->
    <link
      type="text/css"
      rel="stylesheet"
      href="https://member.cwgv.com.tw/public/library/colorbox/example2/colorbox.css"
    />
    <script
      type="text/javascript"
      src="https://member.cwgv.com.tw/public/library/colorbox/jquery.colorbox-min.js"
    ></script>

    <!-- My Style -->
    <link
      type="text/css"
      rel="stylesheet"
      href="https://member.cwgv.com.tw/public/css/style.css"
    />

    <link rel="stylesheet" href="./assets_member/css/memberPage.css" />

    <script>
      fromModal = "";
    </script>
    <script>
      emailAuth = "";
    </script>
    <script>
      base_url = "https://member.cwgv.com.tw/";
    </script>

    <script
      type="text/javascript"
      src="https://member.cwgv.com.tw/public/js/common.js?2019090212"
    ></script>

    <!-- Google Tag Manager -->
    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, "script", "dataLayer", "GTM-KHC4T6H");
    </script>
    <!-- End Google Tag Manager -->

    <script>
      /* Provisory for dev environment: */
      $(function () {
        //localStorage.clear();
      });
    </script>
  </head>

  <body rel="register">
    <!-- Google Tag Manager (noscript) -->
    <noscript
      ><iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-KHC4T6H"
        height="0"
        width="0"
        style="display: none; visibility: hidden"
      ></iframe
    ></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <script
      type="text/javascript"
      src="https://member.cwgv.com.tw/public/js/yahoo-dom-event.js"
    ></script>
    <script
      type="text/javascript"
      src="https://member.cwgv.com.tw/public/js/popupmanager.js"
    ></script>

    <section class="memberHeader">
      <div class="logo">
        <a href="https://futureparenting.cwgv.com.tw/" alt="回首頁">
          <img
            src="https://futureparenting.cwgv.com.tw/public/assets_member/img/logo-s.png"
          />
        </a>
      </div>
    </section>

    <div class="main-content">
      <div class="center-content login-content-wrapper">
        <h3 class="f-left login-title">登入您的 未來親子 帳號</h3>
        <p class="f-right goto-register">
          還沒有帳號？
          <a
            href="https://member.cwgv.com.tw/register"
            target="_blank"
            class="orange"
            >前往註冊</a
          >
        </p>
        <div class="login-content-container">
          <div class="email-way-wrapper">
            <div class="inner">
              <h5 class="select-way-wrapper">
                <div class="select-way active" rel="Email">
                  遠見‧天下文化事業群帳號
                </div>
                <!--<div class="select-way" id="club-select1" rel="Card1"><a href="https://rs.cwgv.com.tw/Login/index" target=_blank>讀書俱樂部會員</a></div>-->
              </h5>
              <form
                class="flat-wrap login-content-area"
                id="login-form"
                method="post"
                action=""
                novalidate="novalidate"
              >
                <input type="hidden" name="login_type" value="Email" />
                <input type="hidden" name="rdurl" id="rdurl" value="" />

                <div class="control-group">
                  <label class="control-label" for="inputAccount"
                    >請輸入帳號<span id="account-descript"
                      >（電子郵件）</span
                    ></label
                  >
                  <div class="controls">
                    <input
                      type="text"
                      name="member_account"
                      id="inputAccount"
                      class="onlyemail required"
                      placeholder="請輸入帳號"
                      value=""
                    />
                  </div>
                </div>
                <div class="control-group">
                  <label class="control-label" for="inputPassword"
                    >請輸入密碼<span id="pwd-descript"></span
                  ></label>
                  <div class="controls">
                    <input
                      type="password"
                      name="member_pwd"
                      id="inputPassword"
                      class="required"
                      value=""
                      placeholder="請輸入密碼"
                    />
                  </div>
                </div>
                <div>
                  <img
                    id="siimage"
                    style="border: 1px solid #000; margin-right: 15px"
                    src="https://member.cwgv.com.tw/login/securimage_jpg?1750269556638"
                    alt="CAPTCHA Image"
                    align="left"
                  />
                  <div>
                    <a
                      tabindex="-1"
                      style="border-style: none"
                      href="#"
                      title="更新驗證碼"
                      class="blue getsecurimage"
                      >更新驗證碼</a
                    ><br />
                    <input
                      type="text"
                      name="ct_captcha"
                      style="width: 90px"
                      id="ct_captcha"
                      placeholder="請輸入驗證碼"
                      size="12"
                      autocomplete="off"
                      class="required"
                      maxlength="4"
                      onkeyup="this.value=this.value.toUpperCase();"
                    /><br />
                  </div>
                </div>

                <button type="submit" class="fillorange f-left">登入</button>
                <div class="forgot forgot-pwd-btn Dorange f-left cwgv">
                  <a class="orange forgot-pwd-link">忘記密碼？</a>
                </div>
                <div
                  class="forgot forgot-pwd-btn Dorange f-left club"
                  style="display: none"
                >
                  <a
                    class="orange"
                    href="http://www.bookzone.com.tw/member/RSmember/pwd.asp"
                    target="_blank"
                    >忘記密碼？</a
                  >
                </div>
                <div class="clear-both"></div>
                <br />
                <div class="black cwgv">
                  還沒有帳號？
                  <a
                    href="https://member.cwgv.com.tw/register"
                    target="_parent"
                    class="orange"
                  >
                    前往註冊</a
                  >
                </div>
                <div class="black cwgv" style="margin-top: 5px">
                  沒有收到驗證信？
                  <a class="orange resend-mail-btn"> 重新寄送驗證信</a>
                </div>
                <div class="black cwgv" style="margin-top: 5px">
                  <a
                    href="searchid"
                    class="orange"
                    title="訂戶編號 / 訂閱到期日查詢"
                  >
                    訂戶編號 / 訂閱到期日查詢</a
                  >
                </div>
                <div class="black club" style="display: none">
                  還不是會員？
                  <a
                    href="http://www.bookzone.com.tw/member/RSmember/index.asp?Ix=E2"
                    target="_blank"
                    class="orange"
                  >
                    前往 加入讀書俱樂部會員</a
                  >
                </div>
              </form>
                            <form
                class="flat-wrap forgot-content-area hide"
                id="forgot-form"
                method="post"
                action=""
                novalidate="novalidate"
              >
                <h5>忘記密碼</h5>
                <p>
                  我們將發送密碼重設信至您的電子信箱，點擊信中網址即可重設密碼。
                </p>
                <div class="red">
                  提醒您，請於60分鐘內重設密碼，超過60分鐘請再次申請重設密碼信。
                </div>
                <div class="control-group">
                  <label class="control-label" for="forgotAccount"
                    >請輸入帳號（電子郵件）</label
                  >
                  <div class="controls">
                    <input
                      type="email"
                      name="member_account"
                      id="forgotAccount"
                      class="required"
                      placeholder="請輸入帳號"
                      value=""
                    />
                  </div>
                </div>
                <button type="submit" class="fillorange f-left">
                  寄送密碼重設信
                </button>
                <div class="clearfix"></div>
                <br />
                <div class="backtologin orange">前往登入</div>
              </form>
              <form
                class="flat-wrap resend-content-area hide"
                id="resend-form"
                method="post"
                action=""
                novalidate="novalidate"
              >
                <h5>重新寄送驗證信</h5>
                <p>
                  我們將發送信箱驗證信至您的電子信箱，點擊信中網址即可完成加入會員。
                </p>
                <div class="control-group">
                  <label class="control-label" for="resendAccount"
                    >請輸入帳號（電子郵件）</label
                  >
                  <div class="controls">
                    <input
                      type="email"
                      name="member_account"
                      id="resendAccount"
                      class="required"
                      placeholder="請輸入帳號"
                      value=""
                    />
                  </div>
                </div>
                <button type="submit" class="fillorange f-left">
                  寄送信箱驗證信
                </button>
                <div class="clearfix"></div>
                <br />
                <div class="backtologin orange">前往登入</div>
              </form>
              <div class="forgot-hint hide">
                密碼驗證信已發送至你的信箱。
                <br />
                <div class="backtologin orange">前往登入</div>
              </div>
              <div class="resend-hint hide">
                信箱驗證信已發送至你的信箱。
                <br />
                <div class="backtologin orange">前往登入</div>
              </div>
            </div>
          </div>
          <div class="way-center">
            <div>或</div>
          </div>
          <div class="social-way-wrapper">
            <div class="inner">
              <h5>使用你的 Google、Facebook 帳號註冊</h5>
              <p>
                現在您可以連結您的帳戶並使用您的 Google 或 Facebook
                帳戶註冊
                遠見天下文化事業群。這相當快速、簡單且安全，您的資料完全保密。
              </p>
              <div class="login-btn-wrapper">
                <div id="google-login-btn" class="login-btn google-login-btn">
                  <svg
                    viewBox="0 0 512 512"
                    xmlns="http://www.w3.org/2000/svg"
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    stroke-linejoin="round"
                    stroke-miterlimit="2"
                  >
                    <path
                      d="M32.582 370.734C15.127 336.291 5.12 297.425 5.12 256c0-41.426 10.007-80.291 27.462-114.735C74.705 57.484 161.047 0 261.12 0c69.12 0 126.836 25.367 171.287 66.793l-73.31 73.309c-26.763-25.135-60.276-38.168-97.977-38.168-66.56 0-123.113 44.917-143.36 105.426-5.12 15.36-8.146 31.65-8.146 48.64 0 16.989 3.026 33.28 8.146 48.64l-.303.232h.303c20.247 60.51 76.8 105.426 143.36 105.426 34.443 0 63.534-9.31 86.341-24.67 27.23-18.152 45.382-45.148 51.433-77.032H261.12v-99.142h241.105c3.025 16.757 4.654 34.211 4.654 52.364 0 77.963-27.927 143.592-76.334 188.276-42.356 39.098-100.305 61.905-169.425 61.905-100.073 0-186.415-57.483-228.538-141.032v-.233z"
                      fill="#fff"
                    />
                  </svg>
                  <span>使用 Google 帳號登入</span>
                </div>
                <a
                  href="https://www.facebook.com/dialog/oauth?client_id=827432718910059&amp;scope=email,public_profile&amp;auth_type=rerequest&amp;redirect_uri=https://member.cwgv.com.tw/login/fblogin&amp;state=366aee566bf2ea05509f90b0ae6cfb16"
                  class="login-btn facebook-login-btn"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    shape-rendering="geometricPrecision"
                    text-rendering="geometricPrecision"
                    image-rendering="optimizeQuality"
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    viewBox="0 0 512 510.125"
                  >
                    <path
                      fill="#fff"
                      fill-rule="nonzero"
                      d="M512 256C512 114.615 397.385 0 256 0S0 114.615 0 256c0 120.059 82.652 220.797 194.157 248.461V334.229h-52.79V256h52.79v-33.709c0-87.134 39.432-127.521 124.977-127.521 16.218 0 44.202 3.18 55.651 6.36v70.916c-6.042-.635-16.537-.954-29.575-.954-41.977 0-58.196 15.901-58.196 57.241V256h83.619l-14.365 78.229h-69.254v175.896C413.771 494.815 512 386.885 512 256z"
                    />
                  </svg>
                  <span>使用 Facebook 帳號登入</span>
                </a>
                <a
                  href="https://access.line.me/oauth2/v2.1/authorize?response_type=code&amp;client_id=1633042404&amp;redirect_uri=https://member.cwgv.com.tw/login/line&amp;state=5797774&amp;scope=openid%20email%20profile"
                ></a>
              </div>
              <p>
                使用其他平台登入，即表示您同意遠見天下文化事業群的<br />
                《<a
                  href="https://futureparenting.cwgv.com.tw/copyright/index/B"
                  target="_blank"
                  >隱私權政策</a
                >》及《<a
                  class="agreepaper cboxElement" href="https://member.cwgv.com.tw/register/rights" target="_blank""
                  >會員服務條款</a
                >》
              </p>
            </div>
            <form
              class="hide"
              id="register-form-social"
              method="post"
              action="https://member.cwgv.com.tw/register/confirm_profile"
            >
              <input name="member_account" />
              <input name="member_name" />
              <input name="member_sexual" />
              <input name="member_birthday" />
            </form>
          </div>
        </div>
      </div>
    </div>
    <footer>
      <div class="footerDownBox memberFooter">
        <div class="container">
          <h5>
            Copyright © 1999~2025 遠見天下文化出版股份有限公司統一編號20905449.
            All rights resercved.
          </h5>
          <ul class="footerDown">
            <span>未來親子學習平台：</span>
            <li>
              <a
                href="https://futureparenting.cwgv.com.tw/kids"
                title=""
                target="_blank"
                >小天下</a
              >
            </li>
            <li>
              <a
                href="https://futureparenting.cwgv.com.tw/kids"
                title=""
                target="_blank"
                >未來出版
              </a>
            </li>
            <li>
              <a
                href="https://futureparenting.cwgv.com.tw/junior"
                title=""
                target="_blank"
                >未來兒童</a
              >
            </li>
            <li>
              <a
                href="https://futureparenting.cwgv.com.tw/youth"
                title=""
                target="_blank"
                >未來少年</a
              >
            </li>
            <li>
              <a
                href="https://futureparenting.cwgv.com.tw/family"
                title=""
                target="_blank"
                >未來Family</a
              >
            </li>
          </ul>
          <h5>
            服務專線：(02)2662-0012 服務時間：週一 ~ 週五：09：00~12：30
            、13：30~17：00
          </h5>
        </div>
      </div>
    </footer>

    <script>
      function parentRedirectnew1(si, rdurl) {
        si = si || null;
        var gotoUrl = "index";
        if (rdurl > "") {
          if (rdurl.indexOf("?") > 0) {
            gotoUrl = rdurl + "&si=" + si;
          } else {
            gotoUrl = rdurl + "?si=" + si;
          }
        }
        parent.location.href = gotoUrl;
      }

      var signtype = "email";
      var rs_cardno = "";

      page = $("body").attr("rel");

      $(".select-way-wrapper .select-way").on("click", function () {
        var loginType = $(this).attr("rel");
        $('input[name="login_type"]').val(loginType);

        if (loginType == "Email") {
          $('#login-form input[name="member_account"]').removeClass("clubcard");
          $('#login-form input[name="member_account"]').addClass("onlyemail");
          $("#account-descript").html("（電子郵件）");
          $("#pwd-descript").html("");

          $(".cwgv").show();
          $(".club").hide();
          signtype = "email";
        } else if (loginType == "Card") {
          $('#login-form input[name="member_account"]').addClass("clubcard");
          $('#login-form input[name="member_account"]').removeClass(
            "onlyemail",
          );
          $("#account-descript").html("（電子郵件 / 卡號）");
          $("#pwd-descript").html("（您的身分證字號）");

          $(".cwgv").hide();
          $(".club").show();
          signtype = "club";
        }

        $(".select-way-wrapper .select-way").removeClass("active");
        $(this).addClass("active");
      });

      $("#login-form").validate({
        submitHandler: function (form) {
          $.ajax({
            url: "https://member.cwgv.com.tw/login/signup",
            type: "POST",
            dataType: "json",
            data: {
              type: signtype,
              email: $('input[name="member_account"]').val(),
              password: $('input[name="member_pwd"]').val(),
              ct_captcha: $('input[name="ct_captcha"]').val(),
              club_cardno: $('input[name="club_cardno"]').val(),
              club_passwd: $('input[name="club_passwd"]').val(),
            },
            success: function (data) {
              //return false;
              if (data.status) {
                fullLoading("登入中");
                setTimeout(function () {
                  if (fromModal) {
                    //parentReload(data.si);
                    parentRedirectnew1(data.si, "");
                  } else {
                    //parentRedirect(data.si);
                    parentRedirectnew1(data.si, "");
                  }
                }, 800);
              } else {
                //alert(data);

                if (data.errcode == "39" || data.errcode == "31") {
                  rs_cardno = data.cardno;
                }
                if (typeof data.email != "undefined") {
                  if (data.errcode == "39" && data.email.length > 0) {
                    $("#confirm-db")
                      .find(".modal-body")
                      .html(
                        "<p>您可使用 Email 帳號：" +
                          data.email +
                          " 登入天下文化會員系統，並整合俱樂部會員，也可以註冊一個新的 Email 帳號登入。</p>",
                      )
                      .end()
                      .attr("emaild", data.email);
                  } else {
                    $("#confirm-db")
                      .find(".modal-body")
                      .html(
                        "<p>您需使用 Email 帳號登入天下文化會員系統，您可以選擇現有會員 Email 帳號登入，也可以註冊一個新的 Email 帳號登入。</p>",
                      )
                      .end()
                      .removeAttr("emaild");
                  }
                } else {
                  $("#confirm-db")
                    .find(".modal-body")
                    .html(
                      "<p>您需使用 Email 帳號登入天下文化會員系統，您可以選擇現有會員 Email 帳號登入，也可以註冊一個新的 Email 帳號登入。</p>",
                    )
                    .end()
                    .removeAttr("emaild");
                }
                //errAlert(data.errcode);
                var captchabug = false;
                if (data.errcode == "31" || data.errcode == "39") {
                  $("#confirm-db").modal("show");
                  captchabug = true;
                } else if (data.errcode == "37") {
                  alert("找不到這個帳號，請點選右上角註冊成為新會員吧");
                  captchabug = true;
                } else if (data.errcode == "91") {
                  alert("信箱尚未通過驗證，請收信或重發認證信");
                  captchabug = true;
                } else if (data.errcode == "93") {
                  alert("密碼錯誤，請再次檢查您的密碼");
                  captchabug = true;
                } else if (data.errcode == "90") {
                  alert("驗證碼輸入錯誤");
                  captchabug = true;
                } else if (data.errcode == "99") {
                  alert("這個社群帳號已被使用過，請再次檢查登入身份喔");
                } else {
                  alert("登入失敗，請檢查您的帳號密碼");
                  captchabug = true;
                }

                if (captchabug) {
                  $('input[name="ct_captcha"]').val("");
                  $("#siimage").attr("src", base_url + "login/securimage_jpg");
                }
              }
            },
          });
        },
      });

      $("#forgot-form").validate({
        submitHandler: function (form) {
          $.ajax({
            url: base_url + "common/resetpw",
            type: "GET",
            cache: false,
            dataType: "json",
            data: {
              email: $("#forgotAccount").val(),
              rdurl: $("#rdurl").val(),
            },
            success: function (data) {
              if (data["errmsg"] == "mer no") {
                alert("您並非使用這個 Email 註冊的唷，請嘗試別的登入方式。");
              } else {
                alert("密碼重設信已發送，請到信箱收信喔");
                $(".forgot-hint").show();
                $(".forgot-content-area").hide();
              }
            },
            error: function (xhr, ajaxOptions, thrownError) {
              console.log(xhr.responseText);
            },
          });
        },
      });

      $("#resend-form").validate({
        submitHandler: function (form) {
          $.ajax({
            url: base_url + "common/resend",
            type: "GET",
            cache: false,
            data: {
              email: $("#resendAccount").val(),
              rdurl: $("#rdurl").val(),
            },
            success: function (data) {
              alert("重新認證信已發送，請到信箱收信喔");
            },
          });
          $(".resend-hint").show();
          $(".resend-content-area").hide();
        },
      });

      $(".forgot-pwd-link").on("click", function () {
        $(".select-way-wrapper").hide();
        $(".login-content-area").hide();
        $(".forgot-content-area").show();
      });

      $(".resend-mail-btn").on("click", function () {
        $(".select-way-wrapper").hide();
        $(".login-content-area").hide();
        $(".resend-content-area").show();
      });
      newMember = false;

      $("#yahoo-login-btn").on("click", function () {});

      $(document).ready(function () {
        if (0) {
          $(".resend-mail-btn").trigger("click");
        }

        //綁定系列;
        $("#card-cancel-login").on("click", function () {
          // alert('不要登入');
          $("#confirm-db").modal("hide");
          signtype = "club";
        });
        $("#card-bind-login").on("click", function () {
          // alert('綁定登入');

          $(".club-hint").remove();
          var club_cardno = $('input[name="member_account"]').val();
          var club_passwd = $('input[name="member_pwd"]').val();

          club_cardno = club_cardno.toUpperCase();
          if (rs_cardno != "") {
            club_cardno = rs_cardno;
          }

          var $clubIpt_cardno = $('<input type="hidden" class="club-hint">');
          var $clubIpt_passwd = $('<input type="hidden" class="club-hint">');
          var $clubH4_hint = $('<h4 class="club-hint">');

          $clubIpt_cardno
            .attr("value", club_cardno)
            .attr("name", "club_cardno");
          $clubIpt_passwd
            .attr("value", club_passwd)
            .attr("name", "club_passwd");
          $clubH4_hint.html("您的卡號為 " + club_cardno + " ，登入後將整合");

          $("#login-form")
            .append($clubIpt_cardno)
            .append($clubIpt_passwd)
            .prepend($clubH4_hint);

          $('input[name="member_account"]').val("");
          $('input[name="member_pwd"]').val("");
          $(".select-way-wrapper .select-way:first").click();

          $("#confirm-db").modal("hide");
          $("#club-select").hide();

          //for reload to locate to this situation
          $.ajax({
            url: base_url + "login/save_for_club_login",
            type: "POST",
            cache: false,
            data: {
              club_cardno: club_cardno,
              club_passwd: club_passwd,
            },
            success: function (data) {},
          });
          signtype = "email";
        });
        $("#card-bind-reg").on("click", function () {
          if ($("#confirm-db").attr("emaild") != null) {
            var emr = confirm(
              "您已有以 " +
                $("#confirm-db").attr("emaild") +
                " 信箱註冊之會員帳號，確定要重新建立嗎？也可以點選「使用現有天下文化帳號登入」來直接進行整合喔！",
            );
            if (emr == true) {
              // continue;
            } else {
              return false;
            }
          }

          // alert('綁定註冊');
          var club_cardno = $('input[name="member_account"]').val();
          var club_passwd = $('input[name="member_pwd"]').val();

          club_cardno = club_cardno.toUpperCase();

          var $clubIpt_cardno = $('<input type="hidden">');
          var $clubIpt_passwd = $('<input type="hidden">');

          $clubIpt_cardno
            .attr("value", club_cardno)
            .attr("name", "club_cardno");
          $clubIpt_passwd
            .attr("value", club_passwd)
            .attr("name", "club_passwd");

          var $newForm = $(
            '<form action="https://member.cwgv.com.tw/register" method="post">',
          );

          $newForm.append($clubIpt_cardno).append($clubIpt_passwd).submit();

          // $('#confirm-db').modal('hide');
        });

        //記錄登入時用卡號  並點選 使用現有天下文化帳號登入

        //重整驗證碼
        $(document).on("click", ".getsecurimage", function () {
          //alert('test')
          loc =
            "https://member.cwgv.com.tw/login/securimage_jpg?" +
            new Date().getTime();
          $("#siimage").attr("src", loc);
          return false;
        });
        $.ajax({
          url: base_url + "login/ini_se",
          type: "GET",
          datatype: "text",
          success: function (data) {
            $(".getsecurimage").click();
          },
        });
      });

      //FB
      function loginFB() {
        FB.login(
          function (response) {
            if (response.status === "connected") {
              getFBdata();
            } else if (response.status === "not_authorized") {
            } else {
            }
          },
          { scope: "public_profile,email" },
        );
      }

      window.fbAsyncInit = function () {
        FB.init({
          appId: "827432718910059",
          cookie: true, // enable cookies to allow the server to access
          // the session
          xfbml: true, // parse social plugins on this page
          version: "v6", // use graph api version 2.8
        });
      };

      // Load the SDK asynchronously
      (function (d, s, id) {
        var js,
          fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s);
        js.id = id;
        js.src = "https://connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
      })(document, "script", "facebook-jssdk");

      $(".facebook-login-btn").on("click", function () {
        loginFB();
      });

      function getFBdata() {
        FB.api("/me", function (response) {
          if (response != null) {
            console.log(response);
            $.ajax({
              url: base_url + "login/signup",
              type: "POST",
              cache: false,
              dataType: "json",
              data: {
                type: "facebook",
                fb_id: response.id,
                fbname: response.name,
                fbemail: response.email,
                sexual: response.gender,
                fbbirthday: response.birthday,
                club_cardno: $('input[name="club_cardno"]').val(),
                club_passwd: $('input[name="club_passwd"]').val(),
              },
              success: function (data) {
                if (data.status) {
                  if (page == "register") {
                    location.href = "index";
                  } else if (page == "login") {
                    if (fromModal) {
                      parentRedirectnew1(data.si, "");
                    } else {
                      parentRedirectnew1(data.si, "");
                    }
                  }
                } else {
                  if (data.errcode == "91") {
                    alert(data.errmsg);
                  } else {
                    alert("這個FB帳號尚未註冊，請先完成註冊步驟，謝謝！");
                    if (fromModal) {
                      var vfromModal = "Y";
                    } else {
                      var vfromModal = "N";
                    }
                    var $nForm = $(
                      '<form class="hide" method="post" action="https://member.cwgv.com.tw/register/confirm_profile">',
                    );
                    var $nIpt = $('<input type="text">');
                    $nIpt
                      .clone()
                      .attr("name", "facebook_id")
                      .attr("value", response.id)
                      .appendTo($nForm);
                    $nIpt
                      .clone()
                      .attr("name", "member_account")
                      .attr("value", response.email)
                      .appendTo($nForm);
                    $nIpt
                      .clone()
                      .attr("name", "fromModal")
                      .attr("value", vfromModal)
                      .appendTo($nForm);
                    $nIpt
                      .clone()
                      .attr("name", "member_name")
                      .attr("value", response.name)
                      .appendTo($nForm);
                    $nIpt
                      .clone()
                      .attr("name", "member_sexual")
                      .attr("value", response.gender)
                      .appendTo($nForm);
                    $nIpt
                      .clone()
                      .attr("name", "member_birthday")
                      .attr("value", response.birthday)
                      .appendTo($nForm);
                    $nForm.appendTo("body").submit();
                  }
                }
              },
            });
          }
        });
      }

      //google
      var gImmediate = true; // 因為G+會自動trigger登入, 所以設定一個點擊狀態

      (function () {
        // 停止google登入
        var po = document.createElement("script");
        po.type = "text/javascript";
        po.async = true;
        po.src =
          "https://apis.google.com/js/client:plusone.js?onload=renderGoogleLogin";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(po, s);
      })();

      //yahoo
      $(".yahoo-login-btn").click(function () {
        alert(
          "現 Yahoo 的不支援跨平台登入，原 Yahoo 登入會員，請使用忘記密碼，設定新密碼登入！如有問題請洽客服，謝謝。",
        );
      });
      function afterConfirm() {
        $.ajax({
          url: "https://member.cwgv.com.tw/common/yahoo?action=getDATA",
          type: "get",
          dataType: "json",
          success: function (data) {
            if (data.status) {
              $.ajax({
                url: base_url + "login/signup",
                type: "POST",
                cache: false,
                dataType: "json",
                data: {
                  type: "yahoo",
                  yahoo_id: data.guid,
                  yname: data.name,
                  sexual: data.gender,
                  yemail: data.email,
                  club_cardno: $('input[name="club_cardno"]').val(),
                  club_passwd: $('input[name="club_passwd"]').val(),
                },
                success: function (data2) {
                  if (data2.status) {
                    if (page == "register") {
                      location.href = "index";
                    } else if (page == "login") {
                      if (fromModal) {
                        //parentReload(data2.si);
                        parentRedirectnew1(data2.si, "");
                      } else {
                        //parentRedirect(data2.si);
                        parentRedirectnew1(data2.si, "");
                      }
                    }
                  } else {
                    alert("這個yahoo帳號尚未註冊，請先完成註冊步驟，謝謝！");
                    if (fromModal) {
                      var vfromModal = "Y";
                    } else {
                      var vfromModal = "N";
                    }
                    var $nForm = $(
                      '<form class="hide" method="post" action="https://member.cwgv.com.tw/register/confirm_profile">',
                    );
                    var $nIpt = $('<input type="text">');
                    $nIpt
                      .clone()
                      .attr("name", "yahoo_id")
                      .attr("value", data.guid)
                      .appendTo($nForm);
                    $nIpt
                      .clone()
                      .attr("name", "member_account")
                      .attr("value", data.email)
                      .appendTo($nForm);
                    $nIpt
                      .clone()
                      .attr("name", "fromModal")
                      .attr("value", vfromModal)
                      .appendTo($nForm);
                    $nIpt
                      .clone()
                      .attr("name", "member_name")
                      .attr("value", data.name)
                      .appendTo($nForm);
                    $nIpt
                      .clone()
                      .attr("name", "member_sexual")
                      .attr("value", data.gender)
                      .appendTo($nForm);
                    $nForm.appendTo("body").submit();
                  }
                },
              });
            } else {
              //console.log(data);
            }
          },
        });
      }

      $(".backtologin").click(function () {
        $(this).parent().hide();
        $(".select-way-wrapper").show();
        $("#login-form").show();
      });

      // 會員條款燈箱
      $(".agreepaper").colorbox({
        iframe: true,
        width: "80%",
        height: "90%",
        maxWidth: "1000px",
      });

    </script>
    <script
      src="https://apis.google.com/js/api:client.js?onload=onLoadCallback"
      async
      defer
    ></script>
    <script>
      var auth2;
      var googleUser = {};
      var auth3;

      window.onLoadCallback = function () {
        gapi.load("auth2", function () {
          auth2 = gapi.auth2.init({
            client_id:
              "194325807151-rr2bpov2rb6hn054h1f0a2a9dmdko2dv.apps.googleusercontent.com",
            cookiepolicy: "member.cwgv.com.tw",
            // Request scopes in addition to 'profile' and 'email'
            scope: "profile email",
          });

          auth3 = true;
          startApp();
        });
      };

      var startApp = function () {
        element = document.getElementById("google-login-btn");
        auth2.attachClickHandler(
          element,
          {},
          function (googleUser) {
            $.ajax({
              url: base_url + "login/signup",
              type: "POST",
              cache: false,
              dataType: "json",
              data: {
                type: "google+",
                google_id: googleUser.getBasicProfile().getId(),
                gname: googleUser.getBasicProfile().getName(),
                gemail: googleUser.getBasicProfile().getEmail(),
                club_cardno: $('input[name="club_cardno"]').val(),
                club_passwd: $('input[name="club_passwd"]').val(),
              },
              success: function (data_a) {
                console.log(data_a);
                if (data_a.status) {
                  if (fromModal) {
                    parentReload(data_a.si);
                  } else {
                    parentRedirect(data_a.si);
                  }
                } else {
                  if (data_a.errcode == "91") {
                    alert(data_a.errmsg);
                  } else {
                    //	errAlert(data.errcode);
                    //alert("這個google帳號尚未註冊，請先前往註冊，謝謝！");
                    alert("這個google帳號尚未註冊，請先完成註冊步驟，謝謝！");
                    if (fromModal) {
                      var vfromModal = "Y";
                    } else {
                      var vfromModal = "N";
                    }
                    var $nForm = $(
                      '<form class="hide" method="post" action="https://member.cwgv.com.tw/register/confirm_profile">',
                    );
                    var $nIpt = $('<input type="text">');
                    $nIpt
                      .clone()
                      .attr("name", "google_id")
                      .attr("value", googleUser.getBasicProfile().getId())
                      .appendTo($nForm);
                    $nIpt
                      .clone()
                      .attr("name", "member_account")
                      .attr("value", googleUser.getBasicProfile().getEmail())
                      .appendTo($nForm);
                    $nIpt
                      .clone()
                      .attr("name", "fromModal")
                      .attr("value", vfromModal)
                      .appendTo($nForm);
                    $nIpt
                      .clone()
                      .attr("name", "member_name")
                      .attr("value", googleUser.getBasicProfile().getName())
                      .appendTo($nForm);
                    $nForm.appendTo("body").submit();
                  }
                }
              },
            });
          },
          function (error) {
            // console.log("5");
            // alert(JSON.stringify(error, undefined, 2));
          },
        );
      };

      if (auth3) startApp();

      $(document).ready(function () {
        //重整驗證碼
        $(document).on("click", ".getsecurimage", function () {
          //alert('test')
          loc =
            "https://member.cwgv.com.tw/login/securimage_jpg?" +
            new Date().getTime();
          $("#siimage").attr("src", loc);
          return false;
        });
        $.ajax({
          url: base_url + "login/ini_se",
          type: "GET",
          datatype: "text",
          success: function (data) {
            $(".getsecurimage").click();
          },
        });
      });
    </script>
  </body>
</html>
<script></script>
<!--964f9b65a560-->
